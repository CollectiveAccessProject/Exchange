<% @resource.media_files.each do |f| %>
    <% if f.sourceable %>
        <div>
          <a href="#" data-toggle="modal" data-target="#<%= f.sourceable.class.to_s + f.sourceable.id.to_s %>">
            <%= f.sourceable.preview :thumbnail %>
          </a>
        </div>
        <%=
          # this renders a bootstrap model that is triggered if you click on the preview above
          # it's in a partial because it's about a billion nested divs :-)
          render partial: 'resources/media_file_render_overlay', locals: {body: f.sourceable.render, modal_id: f.sourceable.class.to_s + f.sourceable.id.to_s}
        %>
    <% else %>
        <div><%= f.title %></div>
    <% end %>
    <%= link_to '<span class="glyphicon glyphicon-trash aria-hidden="true"></span>'.html_safe, f, method: :delete, remote: true, data: {confirm: 'Are you sure you want to delete this media?'} %>
    <hr/>
<% end %>